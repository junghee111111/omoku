!function(e){var n={};function t(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(o,a,function(n){return e[n]}.bind(null,a));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=1)}({1:function(e,n,t){e.exports=t("8yrV")},"8yrV":function(e,n){var t,o,a,s,i,l,r,c,d,m,u,f,p,h,g,v,b,C=null,E=0,k=!1,w=!1,T=[],A=-1;function B(e,n){e.attr("disabled","disabled"),e.html(n)}function I(e,n){e.removeAttr("disabled"),e.html(n)}function O(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fa-spinner",t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;$(".overlay").show(),$(".overlay>.Toast").show(),$(".overlay>.Toast>span").html(e),$(".overlay>.Toast").removeClass("double"),$(".overlay>.Toast>i").removeClass(),$(".overlay>.Toast>i").addClass("fa"),$(".overlay>.Toast>i").addClass(n),o&&$(".overlay>.Toast").addClass("double"),t&&$(".overlay>.Toast>i").addClass("spin"),$(".overlay").css("background-color","rgba(0,0,0,"+a+")")}function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1",n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){R()},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"fas fa-question-circle",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.5;$(".overlay").css("background-color","rgba(0,0,0,"+s+")"),$(".overlay").show(),$(".overlay>.Modal").show(),$(".overlay>.Modal>span").html(n),"1"==e?($("#ModalInput").show(),$("#Btn_ModalCancel").show(),$("#ModalInput").attr("type","text")):"2"==e?($("#ModalInput").hide(),$("#ModalInput").val(""),$("#Btn_ModalCancel").show(),$("#ModalInput").attr("type","text")):"3"==e?("fas fa-question-circle"==o&&(o="fas fa-exclamation-circle"),$("#ModalInput").hide(),$("#ModalInput").val(""),$("#Btn_ModalCancel").hide(),$("#ModalInput").attr("type","text")):"4"==e&&($("#ModalInput").show(),$("#Btn_ModalCancel").show(),$("#ModalInput").attr("type","password")),$(".overlay>.Modal>i").removeClass(),$(".overlay>.Modal>i").addClass(o),a&&$(".overlay>.Modal>i").addClass("spin"),$("#Btn_ModalCancel").off("click"),$("#Btn_ModalCancel").click(function(){R()}),$("#Btn_ModalOk").off("click"),$("#Btn_ModalOk").click(t)}function R(){$(".overlay>.Modal>span").html(""),$(".overlay>.Modal").hide(),$(".overlay").hide()}function N(){$(".overlay>.Toast>span").html(""),$(".overlay>.Toast").hide(),$(".overlay").hide()}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"  회원님 차례입니다.",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];$("#myturnNotifier").find("span").html(e),n?$("#myturnNotifier").css("width","70%"):$("#myturnNotifier").css("width","90%"),$("#myturnNotifier").css("bottom","-70px"),$("#myturnNotifier").stop().animate({bottom:"0px"},300),t||$("#myturnNotifier").delay(1e3).animate({bottom:"-70px"},300)}function _(e){var n=$(".ingame>.intervene"),t=n.children("."+e),o=t.attr("omoku-height");n.show(),t.css("display","block"),t.css("height","0px"),t.css("margin-top","0px"),t.animate({height:o+"px",marginTop:"-"+o/2+"px"},200)}function P(){var e=$(".ingame>.intervene");$(".ingame>.intervene>.dialog").hide(),e.hide()}function U(e){e.loggedIn&&(c=e,console.log(c),$("*[omoku-data='name']").html(e.User.name),$("*[omoku-data='wins']").html(e.User.wins),$("*[omoku-data='loses']").html(e.User.loses),$("*[omoku-data='gold']").html(e.User.gold),$("*[omoku-data='winAll']").html(e.User.wins+e.User.loses),$("*[omoku-data='winRate']").html(F(e.User.wins,e.User.loses)))}function D(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"json";this.act=e,this.url=n,this.type=t,this.data=o,this.dataType=a,this._bs,this._e,this._s,this._c=function(n,t){console.log("["+e+"] -AJAX END- "+t)}}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){U(e)},n=new D("API@PING","/api/ping");n._s=e,n.run()}function L(e){if(!e.success){var n="";return n="E01"==e.message?"아이디/비밀번호가 등록된 정보와 다릅니다.":"알 수 없는 에러",alert(n),I(s,a),!1}top.location.href="/"}function j(){var e=$("#loginform input[type='email']").val(),n=$("#loginform input[type='password']").val();if(B(s,"요청 중.."),!e||!n)return alert("이메일과 비밀번호를 모두 입력하세요."),I(s,a),!1}function G(e){if(!e.success)return I(r,l),!1;top.location.href="/"}function K(){B(r,"요청 중..")}function q(e){var n;if(n="서버 에러 발생 : ["+e.status+"]"+e.statusText,e.responseText.message&&(n+="\n"+e.responseText.message),console.log("Server Side ERROR Detected!"),console.log("상태코드 : "+e.status),console.log("상태메세지 : "+e.statusText),console.log("응답메시지 : "+e.responseText),I(r,l),"422"==e.status){var t="아래 사항을 수정해 주세요!\n-",o=JSON.parse(e.responseText);o.errors.email&&o.errors.email.includes("validation.unique")&&(t+="\n이미 가입된 이메일입니다."),o.errors.name&&(o.errors.name.includes("validation.unique")&&(t+="\n해당 닉네임은 이미 사용되고 있습니다."),o.errors.name.includes("validation.max.string")&&(t+="\n닉네임이 너무 깁니다. (6자 이하)")),o.errors.password&&(o.errors.password.includes("validation.min.string")&&(t+="\n비밀번호가 너무 짧습니다. (8자 이상)"),o.errors.password.includes("validation.confirmed")&&(t+="\n비밀번호와 비밀번호 확인이 일치하지 않습니다.")),alert(t)}else alert(n)}function W(e){var n;n="서버 에러 발생 : ["+e.status+"]"+e.statusText,e.responseText.message&&(n+="\n"+e.responseText.message),alert(n),I(s,a),console.log("Server Side ERROR Detected!"),console.log("상태코드 : "+e.status),console.log("상태메세지 : "+e.statusText),console.log("응답메시지 : "+e.responseText)}function X(e){var n=Math.floor(e/60),t=e%60;return 0!=n&&n<10?"0"+n:n>=10&&n,0!=t&&t<10?"0"+t:0!=t&&t>=10&&t,n+":"+t}function F(e,n){return e+n==0?0:Math.round(e/(e+n)*100)}function J(e){e=e.substring(0,20);t.emit("GAMECHAT",e),$("#ingameChatBody").val(""),$("#ingameChatBody").focus()}function V(e){clearInterval(T[e]),$(".inviteBlock[who='"+e+"']").remove(),t.emit("CONNECTREJECT",e)}function Q(){console.log(window.orientation),90==window.orientation||-90==window.orientation?O("&nbsp;폰을 90도 돌려 세로 방향으로 잡아주세요!","fa-mobile-alt",!0,!1,1):N()}D.prototype.run=function(){console.log("[mAjax RUN] : "+this.act),this._bs||(this._bs=function(e,n){console.log("AJAX is about to run!")}),this._e||(this._e=function(e,n,t){console.log("AJAX ERROR! ("+t+") "+n+"\n"+e)}),this._s||(this._s=function(e,n,t){console.log("AJAX Data received! ("+n+")"+e)}),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$("input[name='_token']").val()}}),$.ajax({url:this.url,type:this.type,data:this.data,dataType:this.dataType,complete:this._c,beforeSend:this._bs,error:this._e,success:this._s})},jQuery(document).ready(function(){1,O("Initializing.."),o=$("#loginform"),s=o.find("button[type='submit']"),a=s.html(),i=$("#registerform"),r=i.find("button[type='submit']"),l=r.html(),b=function(e){var n="";e&&e.forEach(function(e){n+='<li itemid="'+e.item_id+'" itemname="'+e.item.item_name+'" price="'+e.item.price+'" itemtype="'+e.item.type+'">',n+='<div class="imageHolder">',"dol"==e.item.type&&(n+='<img src="/img/'+e.item.type+"/"+e.item.image+'.black.png"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>',n+='&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="/img/'+e.item.type+"/"+e.item.image+'.white.png"/>'),n+="</div>",n+="<h1>"+e.item.item_name+"</h1>",n+="<p>"+moment(e.expire_date).diff(moment(),"days")+"일 남음</p>",n+='<button class="Btn_useItem" purchaseid="'+e.id+'">',"dol"==e.item.type&&(c.User.dol&&c.User.dol.item.id==e.id?n+="착용중":n+="착용하기"),n+="</button>",n+="</li>"}),$(".inventory>ul.purchaseList").html(n),$(".inventory>ul.purchaseList>li").show(),$("button.Btn_useItem").click(function(){var e,n;e=$(this).attr("purchaseid"),n=$(this).parent().attr("itemtype"),function(e,n){var t=new D("SHOP@USE","/shop/use","POST",{purchaseid:n});t._s=e,t.run()}(function(t){t.success?(M(3,"착용했습니다."),H(),$("li[itemtype='"+n+"'] button").html("착용하기"),$("button[purchaseid='"+e+"']").html("착용중")):M(3,t.message)},e)})};H(function(e,n,o){e.loggedIn?function(e){O("게임 서버 접속 허가 대기 중..");try{t=io("//:7376")}catch(e){console.log("CONNECTION FAILED"),O("게임 서버에 연결할 수 없습니다.<br/>서버 점검중일 수 있습니다.","fa-ban",!1,!0)}c=e,$("*[omoku-data='name']").html(c.User.name),t.on("disconnect",function(e){console.log("Socket connection has been closed.."),$("section.login").hide(),$("section.lobby").hide(),$("section.ingame").hide(),w||O("연결이 끊어져 재접속 시도 중..<br/>이유 : "+e+"<br/><a href='/'>여기를 눌러 강제 재접속</a>","fa-spinner",!0,!0)}),t.on("HANDSHAKEREQ",function(e){console.log("SERVER REQUEST HANDSHAKE.."),t.emit("HANDSHAKEADDITIONAL",c.User)}),t.on("ACCEPTED",function(e){console.log("GAME SERVER ACCEPTED!"),N(),$("section.login").fadeOut(500,function(){2,$("section.lobby").fadeIn()})}),t.on("COUNTER",function(e){console.log("COUNTER PACKET ARRIVED : "+e),$("*[omoku-data='counter']").html(e)}),t.on("CHAT",function(e){console.log("CHAT PACKET ARRIVED : "+e),$("textarea#chatContents").append("\n"+e),$("textarea#chatContents").scrollTop(1e5)}),t.on("CONNECTRES",function(e){e.success?(N(),O("친구를 찾았습니다! 수락을 기다리는 중..")):(N(),M("3",e.message)),H()}),t.on("CONNECTREQ",function(e){var n='<div class="inviteBlock" who="'+e.who.id+'"><em class="fas fa-handshake"></em><strong>';n+=e.who.name,n+='</strong> 님의 초대<br><button class="accept" who="'+e.who.id+'">수락</button><button class="reject" who="'+e.who.id+'">거절</button></div>',$(".inviteListWrapper").append(n),T[Number(e.who.id)]=setTimeout(function(){$(".inviteBlock[who='"+e.who.id+"']").fadeOut(),V(e.who.id)},5e3),H()}),t.on("CONNECTACCEPT",function(e){N(),O("연결 수락됨.. 게임을 곧 시작합니다!"),H()}),t.on("CONNECTREJECT",function(e){N(),M("3","상대방이 연결을 거부했습니다.")}),t.on("MATCHED",function(e){console.log("ENEMY MATCHED!"),H(),d=e,console.log(d),$(".startBtnWrapper").fadeOut(150,function(){$(".startBtn").hide(),$("#running").hide(),$("#matched").show(),$(".startBtnWrapper").fadeIn(250)}),$("*[omoku-data='enemy-name']").html(d.name),$("*[omoku-data='enemy-winAll']").html(d.wins+d.loses),$("*[omoku-data='enemy-wins']").html(d.wins),$("*[omoku-data='enemy-loses']").html(d.loses),$("*[omoku-data='enemy-winRate']").html(F(d.wins,d.loses)),setTimeout(function(){O(d.name+"님과 게임을 시작합니다.","fa-check",!1)},1e3),setTimeout(function(){$("section.lobby").fadeOut(),N(),_("ready"),$("section.ingame").fadeIn(500,function(){t.emit("ROOMENTER")})},2e3)}),t.on("RSPSTART",function(e){console.log("RSPGAME START"),_("rsp"),$(".dialog.quitWarning>.forcequit").show(),$(".rspdone").removeClass("fa-hand-rock"),$(".rspdone").removeClass("fa-hand-scissors"),$(".rspdone").removeClass("fa-hand-paper"),$(".rspdone").removeClass("fas"),$(".rspdone").addClass("fa"),$(".rspdone").addClass("fa-check"),$(".rspdone").hide(),$(".rsprotate").show(),$(".mybutton.selected").removeClass("selected"),$(".mybutton").show(),$(".dialog.rsp .timer").css("width","100%"),$(".dialog.rsp h1[omoku-data='title']").html("가위바위보 승자가 흑돌을 쥡니다."),$(".dialog.rsp h2").html('오목은 흑돌이 선공입니다.<br/><i omoku-data="rsptimer">7</i>&nbsp;초안에 선택해주세요.');var n=1,o=7,a=setInterval(function(){$(".rsprotate").removeClass("fa-hand-rock"),$(".rsprotate").removeClass("fa-hand-scissors"),$(".rsprotate").removeClass("fa-hand-papaer"),1==n?$(".rsprotate").addClass("fa-hand-rock"):2==n?$(".rsprotate").addClass("fa-hand-scissors"):$(".rsprotate").addClass("fa-hand-paper"),4==++n&&(n=1)},100),s=setInterval(function(){o>0?(o--,$("i[omoku-data='rsptimer']").html(o)):clearInterval(s)},1e3);$(".intervene>.rsp>.timer").stop().animate({width:"0%"},7e3,"linear",function(){if(clearInterval(a),clearInterval(s),$(".rsprotate").hide(),$(".rspdone").fadeIn(),!C){var e=Math.floor(3*Math.random())+1,n="R";2==e?n="S":3==e&&(n="P"),$(".rspbutton.mybutton").hide(),$(".mybutton[omoku-rspdata='"+n+"']").fadeIn(),$(".mybutton[omoku-rspdata='"+n+"']").addClass("selected"),t.emit("RSPSELECT",n)}})}),t.on("RSPENEMYDONE",function(e){console.log("RSPGAME ENEMY HAS SELECTED"),$(".rsprotate").hide(),$(".rspdone").fadeIn()}),t.on("RSPRESULT",function(e){var n,t;H(),$(".intervene>.rsp>.timer").stop(),console.log("RSPGAME RESULT PACKET / WINNER : "+e),-1==e?(n="무승부입니다!",t="가위바위보를 곧 다시 실시합니다..",$(".dialog.rsp>div>.rspdone").removeClass("fa-check"),$(".dialog.rsp>div>.rspdone").removeClass("fa"),$(".dialog.rsp>div>.rspdone").addClass("fas"),"R"==C?$(".dialog.rsp>div>.rspdone").addClass("fa-hand-rock"):"S"==C?$(".dialog.rsp>div>.rspdone").addClass("fa-hand-scissors"):$(".dialog.rsp>div>.rspdone").addClass("fa-hand-paper")):e==c.User.id?(n=c.User.name+"님의 승리!",t=c.User.name+"님이 선공합니다.",$(".dialog.rsp>div>.rspdone").removeClass("fa-check"),$(".dialog.rsp>div>.rspdone").removeClass("fa"),$(".dialog.rsp>div>.rspdone").addClass("fas"),"R"==C?$(".dialog.rsp>div>.rspdone").addClass("fa-hand-scissors"):"S"==C?$(".dialog.rsp>div>.rspdone").addClass("fa-hand-paper"):$(".dialog.rsp>div>.rspdone").addClass("fa-hand-rock")):(n=d.name+"님의 승리!",t=d.name+"님이 선공합니다.",$(".dialog.rsp>div>.rspdone").removeClass("fa-check"),$(".dialog.rsp>div>.rspdone").removeClass("fa"),$(".dialog.rsp>div>.rspdone").addClass("fas"),"R"==C?$(".dialog.rsp>div>.rspdone").addClass("fa-hand-paper"):"S"==C?$(".dialog.rsp>div>.rspdone").addClass("fa-hand-rock"):$(".dialog.rsp>div>.rspdone").addClass("fa-hand-scissors")),$(".dialog.rsp>h1[omoku-data='title']").html(n),$(".dialog.rsp>h2").html(t)}),t.on("GAMETURN",function(e){H(),P(),console.log("GAMETURN .. "+e.round+" 라운드 / "+e.who+"의 턴/ "+e.timer+"초 경과"),E=e.timer,u=e.timePerTurn,$("*[omoku-data='state']").html(X(E)),$("*[omoku-data='phase']").html(e.round+"번째 착수"),null!=m&&clearInterval(m),f||(f=setInterval(function(){E++,$("*[omoku-data='state']").html(X(E))},1e3)),$("*[omoku-data='turn-time-left']").html(" 15초 남음"),m=setInterval(function(){u>0?(10==--u&&k&&S("10초 남았습니다.",!0),5==u&&k&&S("5초 남았습니다.",!0),$("*[omoku-data='turn-time-left']").html(" "+u+"초 남음")):$("*[omoku-data='turn-time-left']").html(" 아무곳이나 착수합니다.")},1e3),e.who==c.User.id?(k=!0,S(),$("*[omoku-data='turn']").html(c.User.name+" 차례"),$("section.ingame .ingameBar.me").removeClass("off"),$("section.ingame .ingameBar.me").addClass("on"),$("section.ingame .ingameBar.enemy").removeClass("on"),$("section.ingame .ingameBar.enemy").addClass("off"),$("section.ingame .ingameBar.me small.turn").show(),$("section.ingame .ingameBar.enemy small.turn").hide()):(k=!1,$("*[omoku-data='turn']").html(d.name+" 차례"),$("section.ingame .ingameBar.me").removeClass("on"),$("section.ingame .ingameBar.me").addClass("off"),$("section.ingame .ingameBar.enemy").removeClass("off"),$("section.ingame .ingameBar.enemy").addClass("on"),$("section.ingame .ingameBar.me small.turn").hide(),$("section.ingame .ingameBar.enemy small.turn").show(),$(".gameAction>#placeApplier").hide())}),t.on("PLACE",function(e){console.log("PLACE .. 누가 ? "+e.who+" X : "+e.x+" /  Y : "+e.y+" 돌 : "+e.stone),clearInterval(m);var n="pos"+e.x+"-"+e.y;$(".board>button."+n).removeClass("on"),$(".board>button."+n).addClass(e.stone),e.who==c.User.id?($("aside.gameAction>#placeApplier").fadeOut(),c.User.dol&&$(".board>button."+n).addClass(c.User.dol.item.image)):d.dol&&$(".board>button."+n).addClass(d.dol.item.image)}),t.on("PLACEERR",function(e){console.log("PLACEERR .. "+e),"33"==e&&($("aside.gameAction>#placeApplier").fadeOut(),S("흑은 33을 둘 수 없습니다.",!0),k=!0)}),t.on("ENDGAME",function(e){var n,t=!1;k=!1,clearInterval(f),clearInterval(m),e.winner==c.User.id?(n=c.User.name,t=!0):n=d.name,S(n+"님이 이겼습니다!",!1,!0);for(var o=0;o<e.testimony.length;o++){y=e.testimony[o][0],x=e.testimony[o][1];var a="pos"+y+"-"+x;$("button[pos='"+a+"']").addClass("on")}setTimeout(function(){_("endgame");var e="패배했습니다.";h2='<i class="gold fa fa-dot-circle">&nbsp;120골드</i>를 잃었습니다!<br/>잠시 뒤 자동 퇴장합니다.',t&&(e="승리했습니다!",h2='<i class="gold fa fa-dot-circle">&nbsp;100골드</i>를 얻었습니다!<br/>잠시 뒤 자동 퇴장합니다.'),$(".dialog.endgame>h1[omoku-data='title']").html(e),$(".dialog.endgame>h2").html(h2)},2e3)}),t.on("ROOMCLOSED",function(e){H(function(e){U(e)}),k=!1,clearInterval(f),clearInterval(m),null,d=null,C=null,u=0,E=0,$("section.gameBoard>.board>button").removeClass("white"),$("section.gameBoard>.board>button").removeClass("black"),$("section.gameBoard>.board>button").removeClass("on"),setTimeout(function(){P(),$(".runningBtn.matched").hide(),$(".startBtn").show(),O("방을 퇴장하는 중입니다.."),$("section.ingame").fadeOut(300,function(){$("section.lobby").fadeIn(300,function(){N(),"ENDGAME"==e?console.log("ROOMCLOSED 패킷 : 정상적인 게임 종료로 인한 퇴장.."):"DISCONNECT"==e?(console.log("ROOMCLOSED 패킷 : 상대방의 비정상적 연결 끊김으로 강제퇴장.."),alert("상대방과의 연결이 끊어졌습니다.\n상대방에겐 200골드 차감의 패널티를 부여했습니다.\n\n게임에 불편을 끼쳐 죄송합니다.")):"DISCONNECTBYME"==e?(console.log("ROOMCLOSED 패킷 : 상대방의 비정상적 연결 끊김으로 강제퇴장.."),alert("게임 중 퇴장 패널티로 200골드 차감되었습니다.")):"DISCONNECTUNKNOWN"==e&&(console.log("ROOMCLOSED 패킷 : 상대방의 비정상적 연결 끊김으로 강제퇴장.."),alert("상대방이 응답하지 않습니다."))})})},500)}),t.on("DISCONNECTED",function(e){w=!0,k=!1,clearInterval(f),clearInterval(m),null,d=null,C=null,u=0,E=0,$("section.gameBoard>.board>button").removeClass("white"),$("section.gameBoard>.board>button").removeClass("black"),$("section.gameBoard>.board>button").removeClass("on"),P(),$(".runningBtn.matched").hide(),$("section.login").hide(),$("section.lobby").hide(),$("section.ingame").hide(),O("에러코드 "+e.code+"<br/>"+e.msg,"fa-ban",!1,!0)}),t.on("GAMECHAT",function(e){console.log("GAME CHAT PACKET ARRIVED : "+e),c.User.id==e.who?($(".me .chatBalloon").html(e.message),$(".me .chatBalloon").show(),$(".me .chatBalloon").css("bottom","80px"),$(".me .chatBalloon").animate({bottom:"60px"},200,function(){clearTimeout(g),g=setTimeout(function(){$(".me .chatBalloon").fadeOut()},3e3)})):($(".enemy .chatBalloon").html(e.message),$(".enemy .chatBalloon").show(),$(".enemy .chatBalloon").css("top","40px"),$(".enemy .chatBalloon").animate({top:"60px"},200,function(){clearTimeout(v),v=setTimeout(function(){$(".enemy .chatBalloon").fadeOut()},3e3)}))})}(e):($("section.login").fadeIn(),N(),Q()),U(e)});var e={dataType:"json",success:L,beforeSubmit:j,error:W};o.ajaxForm(e);var n={dataType:"json",success:G,beforeSubmit:K,error:q,headers:{"X-CSRF-TOKEN":$("input[name='_token']").val()}};i.ajaxForm(n)}),$("#chatInput").keypress(function(e){if(13==e.keyCode){var n=$(this).val();n=n.substring(0,40),t.emit("CHAT",n),$(this).val(""),$(this).focus()}}),$("#ingameChatBody").keypress(function(e){13==e.keyCode&&J($(this).val())}),$("#chatSubmit").click(function(){J($(this).val())}),$("#connectFriend").click(function(){N();M(1,"연결할 친구의 닉네임을 입력해주세요.",function(){var e=$("#ModalInput").val();R(),O("연결 요청 중.."),t.emit("CONNECT",{me:c.User.id,to:e})},"fa fa-user-friends")}),$("#Btn_changeName").click(function(){M(1,"바꿀 닉네임을 입력하세요.(6자이내)",function(){var e=$("#ModalInput").val().trim(),n=$(".Modal input[name='_token']").val();if(""!=e){var t=new D("Auth@changeName","/auth/changeName","post",{name:e,token:n},"json");t._s=function(e){e.success?(M("3","닉네임이 변경되었습니다!",function(){R()},"fa fa-check"),H()):M("3",e.msg,function(){R()},"fa fa-ban")},t.run()}})}),$("#Btn_changePasswd").click(function(){M(4,"바꿀 비밀번호를 입력하세요.",function(){var e=$("#ModalInput").val().trim();$(".Modal input[name='_token']").val();if(""!=e){var n=new D("Auth@changePassword","/auth/changePassword","post",{password:e},"json");n._s=function(e){e.success?(M("3","비밀번호가 변경되었습니다!",function(){R()},"fa fa-check"),H()):M("3",e.msg,function(){R()},"fa fa-ban")},n._e=function(e){alert("비밀번호 변경중 오류가 발생했습니다.\n비밀번호가 8자 이상인지 확인해보세요.")},n.run()}},"fas fa-key")}),$("#Btn_removeUser").click(function(){M(1,'회원탈퇴 후 복구는 불가능합니다.<br/>탈퇴하려면 <em class="colorRed">계정탈퇴동의</em> 라고 정확히 입력해주세요.',function(){var e=$("#ModalInput").val().trim();$(".Modal input[name='_token']").val();if(""!=e){var n=new D("Auth@removeAccount","/auth/removeAccount","post",{allow:e},"json");n._s=function(e){e.success?(alert("탈퇴처리 되었습니다.\n이용해 주셔서 감사합니다!"),t.close(),top.location.href="/auth/logout"):M("3",e.msg,function(){R()},"fa fa-ban")},n.run()}},"fa fa-user-slash")}),$("#startMatch").click(function(){t.emit("MATCHIN")}),$("#running").click(function(){t.emit("MATCHOUT")}),$(".rspbutton.mybutton").click(function(){var e=$(this).attr("omoku-rspdata");C=e,$(".rspbutton.mybutton").hide(),$(this).fadeIn(),$(this).addClass("selected"),t.emit("RSPSELECT",e)}),$("section.gameBoard>.board>button").each(function(e,n){var t=$(this).attr("pos"),o=20+12*(2*((t=(t=t.split("pos"))[1].split("-"))[0]-1)-1),a=20+12*(2*(t[1]-1)-1);$(this).css("left",o+"px"),$(this).css("top",a+"px")}),$("section.gameBoard>.board>button").click(function(){$("section.gameBoard>.board>button").removeClass("on");var e=$(this).hasClass("white"),n=$(this).hasClass("black");if(k&&!e&&!n){$("*[omoku-data='placeBtn']").find("i").removeClass("fa-spinner"),$("*[omoku-data='placeBtn']").find("i").removeClass("spin"),$("*[omoku-data='placeBtn']").find("i").addClass("fa-check"),$("*[omoku-data='placeBtn']").find("span").html("&nbsp;착수");var t=$(this).attr("pos");t=(t=t.split("pos"))[1].split("-"),p=t[0],h=t[1],$(this).addClass("on"),$(".gameAction>#placeApplier").hide(),$(".gameAction>#placeApplier").fadeIn()}}),$("*[omoku-data='placeBtn']").click(function(){k=!1,t.emit("PLACE",{x:p,y:h}),$(this).find("i").removeClass("fa-check"),$(this).find("i").addClass("fa-spinner"),$(this).find("i").addClass("spin"),$(this).find("span").html("착수중..")}),$("section.ingame>section.ingameBar.enemy>em.fa-arrow-left").click(function(){_("quitWarning")}),$(".dialog.quitWarning>.forcequit").click(function(){$(this).hide(),confirm("정말 나가시겠습니까?")?t.emit("ROOMSOFTQUIT"):$(this).show()}),$(".dialog.quitWarning>.cancel").click(function(){P()}),$("nav.bottom>ul>li").click(function(){var e,n,t=$(this).attr("segment");if("ranking"==t){e=function(e){var n='<ul class="ranker head"><li class="no">순위</li><li class="nick">닉네임</li><li class="wins">승</li><li class="loses">패</li><li class="winrate">승률</li><li class="online">접속</li></ul>',t=1;e.forEach(function(e){var o;o="1"==e.online?'<em class="fas fa-circle" style="color:limegreen"></em>':'<em class="fas fa-circle" style="color:gray"></em>',n+='<ul class="ranker"><li class="no">'+t+'</li><li class="nick">'+e.name+'</li><li class="wins">'+e.wins+'</li><li class="loses">'+e.loses+'</li><li class="winrate">'+F(e.wins,e.loses)+'%</li><li class="online">'+o+"</li></ul>",t++}),$(".rankBoard").html(n)},(n=new D("API@RANKING","/api/ranking"))._s=e,n.run()}else if("store"==t){!function(e){var n=new D("SHOP@INDEX","/shop");n._s=e,n.run()}(function(e){var n="";e.forEach(function(e){n+='<li itemid="'+e.id+'" itemname="'+e.item_name+'" price="'+e.price+'" itemtype="'+e.type+'">',n+='<div class="imageHolder">',"dol"==e.type&&(n+='<img src="/img/'+e.type+"/"+e.image+'.black.png"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>',n+='&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="/img/'+e.type+"/"+e.image+'.white.png"/>'),n+="</div>",n+="<h1>"+e.item_name+"</h1>",n+="<p>"+e.item_desc+"</p>",n+='<button class="Btn_buyItem" itemid="'+e.id+'"><em class="fa fa-dot-circle gold">&nbsp;'+e.price+"</em> (7일)</button>",n+="</li>"}),$(".storeBoard>ul.item").html(n),$(".storeBoard>ul.item>li[itemtype='dol']").show(),$("button.Btn_buyItem").click(function(){var e,n,t;e=$(this).attr("itemid"),n=$("li[itemid='"+e+"']").attr("itemname"),t=$("li[itemid='"+e+"']").attr("price"),A=e,M(2,n+" - <em class='gold fa fa-dot-circle'>&nbsp;"+t+"</em><br/>정말 구매하시겠어요?",function(){var e,n;e=function(e){e.success?(M(3,"구매를 완료했습니다."),H()):M(3,e.message)},(n=new D("SHOP@PURCHASE","/shop/purchase","post",{itemid:A}))._s=e,n.run()},"fa fa-shopping-cart")})})}else"account"==t&&function(e){var n=new D("SHOP@PURCHASEINDEX","/shop/purchase");n._s=e,n.run()}(b)}),$(document).on("click","button.accept",function(){var e;e=$(this).attr("who"),clearInterval(T[e]),$(".inviteListWrapper").html(""),t.emit("CONNECTACCEPT",e),$(".startBtn").hide(),$("#matched").fadeIn(),O("곧 게임을 진행합니다..")}),$(document).on("click","button.reject",function(){V($(this).attr("who"))}),document.addEventListener("touchmove",function(e){if(1==e.touches.length)e.touches[0],$("section.gameBoard>.board").offset().left},!1),window.addEventListener("orientationchange",Q),Q()}});