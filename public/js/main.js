!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=1)}({1:function(e,t,n){e.exports=n("8yrV")},"8yrV":function(e,t){var n,o,a,s,i,l,r,c,d,m,u,f,h,p,g,v,b,C=!0,E=null,k=0,w=!1,T=!1,A=[],B=-1,I=300,O=350,M=400;function R(e,t){e.attr("disabled","disabled"),e.html(t)}function N(e,t){e.removeAttr("disabled"),e.html(t)}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fa-spinner",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;$(".overlay").show(),$(".overlay>.Toast").show(),$(".overlay>.Toast>span").html(e),$(".overlay>.Toast").removeClass("double"),$(".overlay>.Toast>i").removeClass(),$(".overlay>.Toast>i").addClass("fa"),$(".overlay>.Toast>i").addClass(t),o&&$(".overlay>.Toast").addClass("double"),n&&$(".overlay>.Toast>i").addClass("spin"),$(".overlay").css("background-color","rgba(0,0,0,"+a+")")}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){P()},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"fas fa-question-circle",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.5;$(".overlay").css("background-color","rgba(0,0,0,"+s+")"),$(".overlay").show(),$(".overlay>.Modal").show(),$(".overlay>.Modal>span").html(t),"1"==e?($("#ModalInput").show(),$("#Btn_ModalCancel").show(),$("#ModalInput").attr("type","text")):"2"==e?($("#ModalInput").hide(),$("#ModalInput").val(""),$("#Btn_ModalCancel").show(),$("#ModalInput").attr("type","text")):"3"==e?("fas fa-question-circle"==o&&(o="fas fa-exclamation-circle"),$("#ModalInput").hide(),$("#ModalInput").val(""),$("#Btn_ModalCancel").hide(),$("#ModalInput").attr("type","text")):"4"==e&&($("#ModalInput").show(),$("#Btn_ModalCancel").show(),$("#ModalInput").attr("type","password")),$(".overlay>.Modal>i").removeClass(),$(".overlay>.Modal>i").addClass(o),a&&$(".overlay>.Modal>i").addClass("spin"),$("#Btn_ModalCancel").off("click"),$("#Btn_ModalCancel").click(function(){P()}),$("#Btn_ModalOk").off("click"),$("#Btn_ModalOk").click(n)}function P(){$(".overlay>.Modal>span").html(""),$(".overlay>.Modal").hide(),$(".overlay").hide()}function U(){$(".overlay>.Toast>span").html(""),$(".overlay>.Toast").hide(),$(".overlay").hide()}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"  회원님 차례입니다.",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];$("#myturnNotifier").find("span").html(e),t?$("#myturnNotifier").css("width","70%"):$("#myturnNotifier").css("width","90%"),$("#myturnNotifier").css("bottom","-70px"),$("#myturnNotifier").stop().animate({bottom:"0px"},300),n||$("#myturnNotifier").delay(1e3).animate({bottom:"-70px"},300)}function H(e){var t=$(".ingame>.intervene"),n=t.children("."+e),o=n.attr("omoku-height");t.show(),n.css("display","block"),n.css("height","0px"),n.css("margin-top","0px"),n.animate({height:o+"px",marginTop:"-"+o/2+"px"},200)}function L(){var e=$(".ingame>.intervene");$(".ingame>.intervene>.dialog").hide(),e.hide()}function j(e){e.loggedIn&&(c=e,console.log(c),$("*[omoku-data='name']").html(e.User.name),$("*[omoku-data='wins']").html(e.User.wins),$("*[omoku-data='loses']").html(e.User.loses),$("*[omoku-data='gold']").html(e.User.gold),$("*[omoku-data='winAll']").html(e.User.wins+e.User.loses),$("*[omoku-data='winRate']").html(Y(e.User.wins,e.User.loses)))}function G(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"json";this.act=e,this.url=t,this.type=n,this.data=o,this.dataType=a,this._bs,this._e,this._s,this._c=function(t,n){console.log("["+e+"] -AJAX END- "+n)}}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){j(e)},t=new G("API@PING","/api/ping");t._s=e,t.run()}function q(e){if(!e.success){var t="";return t="E01"==e.message?"닉네임/비밀번호가 등록된 정보와 다릅니다.":"알 수 없는 에러",alert(t),N(s,a),!1}top.location.href="/"}function W(){var e=$("#loginform input[type='text']").val(),t=$("#loginform input[type='password']").val();if(R(s,"요청 중.."),!e||!t)return alert("닉네임과 비밀번호를 모두 입력하세요."),N(s,a),!1}function X(e){if(!e.success)return N(r,l),!1;top.location.href="/"}function F(){R(r,"요청 중..")}function J(e){var t;if(t="서버 에러 발생 : ["+e.status+"]"+e.statusText,e.responseText.message&&(t+="\n"+e.responseText.message),console.log("Server Side ERROR Detected!"),console.log("상태코드 : "+e.status),console.log("상태메세지 : "+e.statusText),console.log("응답메시지 : "+e.responseText),N(r,l),"422"==e.status){var n="아래 사항을 수정해 주세요!\n-",o=JSON.parse(e.responseText);o.errors.email&&o.errors.email.includes("validation.unique")&&(n+="\n이미 가입된 이메일입니다."),o.errors.name&&(o.errors.name.includes("validation.unique")&&(n+="\n해당 닉네임은 이미 사용되고 있습니다."),o.errors.name.includes("validation.max.string")&&(n+="\n닉네임이 너무 깁니다. (6자 이하)")),o.errors.password&&(o.errors.password.includes("validation.min.string")&&(n+="\n비밀번호가 너무 짧습니다. (8자 이상)"),o.errors.password.includes("validation.confirmed")&&(n+="\n비밀번호와 비밀번호 확인이 일치하지 않습니다.")),alert(n)}else alert(t)}function V(e){var t;t="서버 에러 발생 : ["+e.status+"]"+e.statusText,e.responseText.message&&(t+="\n"+e.responseText.message),alert(t),N(s,a),console.log("Server Side ERROR Detected!"),console.log("상태코드 : "+e.status),console.log("상태메세지 : "+e.statusText),console.log("응답메시지 : "+e.responseText)}function Q(e){var t=Math.floor(e/60),n=e%60;return 0!=t&&t<10?"0"+t:t>=10&&t,0!=n&&n<10?"0"+n:0!=n&&n>=10&&n,t+":"+n}function Y(e,t){return e+t==0?0:Math.round(e/(e+t)*100)}function z(e){e=e.substring(0,20);n.emit("GAMECHAT",e),$("#ingameChatBody").val(""),$("#ingameChatBody").focus()}function Z(e){clearInterval(A[e]),$(".inviteBlock[who='"+e+"']").remove(),n.emit("CONNECTREJECT",e)}function ee(){console.log(window.orientation),90==window.orientation||-90==window.orientation?S("&nbsp;폰을 90도 돌려 세로 방향으로 잡아주세요!","fa-mobile-alt",!0,!1,1):U()}G.prototype.run=function(){console.log("[mAjax RUN] : "+this.act),this._bs||(this._bs=function(e,t){console.log("AJAX is about to run!")}),this._e||(this._e=function(e,t,n){console.log("AJAX ERROR! ("+n+") "+t+"\n"+e)}),this._s||(this._s=function(e,t,n){console.log("AJAX Data received! ("+t+")"+e)}),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$("input[name='_token']").val()}}),$.ajax({url:this.url,type:this.type,data:this.data,dataType:this.dataType,complete:this._c,beforeSend:this._bs,error:this._e,success:this._s})},jQuery(document).ready(function(){1,S("Initializing.."),o=$("#loginform"),s=o.find("button[type='submit']"),a=s.html(),i=$("#registerform"),r=i.find("button[type='submit']"),l=r.html(),b=function(e){var t="";e&&e.forEach(function(e){t+='<li itemid="'+e.item_id+'" itemname="'+e.item.item_name+'" price="'+e.item.price+'" itemtype="'+e.item.type+'">',t+='<div class="imageHolder">',"dol"==e.item.type&&(t+='<img src="/img/'+e.item.type+"/"+e.item.image+'.black.png"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>',t+='&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="/img/'+e.item.type+"/"+e.item.image+'.white.png"/>'),t+="</div>",t+="<h1>"+e.item.item_name+"</h1>",t+="<p>"+moment(e.expire_date).diff(moment(),"days")+"일 남음</p>",t+='<button class="Btn_useItem" purchaseid="'+e.id+'">',"dol"==e.item.type&&(c.User.dol&&c.User.dol.item.id==e.id?t+="착용중":t+="착용하기"),t+="</button>",t+="</li>"}),$(".inventory>ul.purchaseList").html(t),$(".inventory>ul.purchaseList>li").show(),$("button.Btn_useItem").click(function(){var e,t;e=$(this).attr("purchaseid"),t=$(this).parent().attr("itemtype"),function(e,t){var n=new G("SHOP@USE","/shop/use","POST",{purchaseid:t});n._s=e,n.run()}(function(n){n.success?(_(3,"착용했습니다."),K(),$("li[itemtype='"+t+"'] button").html("착용하기"),$("button[purchaseid='"+e+"']").html("착용중")):_(3,n.message)},e)})};K(function(e,t,o){e.loggedIn?function(e){S("게임 서버 접속 허가 대기 중..");try{n=C?io("https://www.omoku.net:7376"):io("//localhost:7376")}catch(e){console.log("CONNECTION FAILED"),S("게임 서버에 연결할 수 없습니다.<br/>서버 점검중일 수 있습니다.","fa-ban",!1,!0)}c=e,$("*[omoku-data='name']").html(c.User.name),n.on("disconnect",function(e){console.log("Socket connection has been closed.."),$("section.login").hide(),$("section.lobby").hide(),$("section.ingame").hide(),T||S("연결이 끊어져 재접속 시도 중..<br/>이유 : "+e+"<br/><a href='/'>여기를 눌러 강제 재접속</a>","fa-spinner",!0,!0)}),n.on("HANDSHAKEREQ",function(e){console.log("SERVER REQUEST HANDSHAKE.."),n.emit("HANDSHAKEADDITIONAL",c.User)}),n.on("ACCEPTED",function(e){console.log("GAME SERVER ACCEPTED!"),U(),$("section.login").fadeOut(500,function(){2,$("section.lobby").fadeIn()})}),n.on("COUNTER",function(e){console.log("COUNTER PACKET ARRIVED : "+e),$("*[omoku-data='counter']").html(e)}),n.on("CHAT",function(e){console.log("CHAT PACKET ARRIVED : "+e),$("textarea#chatContents").append("\n"+e),$("textarea#chatContents").scrollTop(1e5)}),n.on("CONNECTRES",function(e){e.success?(U(),S("친구를 찾았습니다! 수락을 기다리는 중..")):(U(),_("3",e.message)),K()}),n.on("CONNECTREQ",function(e){var t='<div class="inviteBlock" who="'+e.who.id+'"><em class="fas fa-handshake"></em><strong>';t+=e.who.name,t+='</strong> 님의 초대<br><button class="accept" who="'+e.who.id+'">수락</button><button class="reject" who="'+e.who.id+'">거절</button></div>',$(".inviteListWrapper").append(t),A[Number(e.who.id)]=setTimeout(function(){$(".inviteBlock[who='"+e.who.id+"']").fadeOut(),Z(e.who.id)},5e3),K()}),n.on("CONNECTACCEPT",function(e){U(),S("연결 수락됨.. 게임을 곧 시작합니다!"),K()}),n.on("CONNECTREJECT",function(e){U(),_("3","상대방이 연결을 거부했습니다.")}),n.on("MATCHED",function(e){console.log("ENEMY MATCHED!"),K(),d=e,console.log(d),$(".startBtnWrapper").fadeOut(150,function(){$(".startBtn").hide(),$("#running").hide(),$("#matched").show(),$(".startBtnWrapper").fadeIn(250),setTimeout(function(){$(".startBtn").show(),$("#matched").hide()},4e3)}),$("*[omoku-data='enemy-name']").html(d.name),$("*[omoku-data='enemy-winAll']").html(d.wins+d.loses),$("*[omoku-data='enemy-wins']").html(d.wins),$("*[omoku-data='enemy-loses']").html(d.loses),$("*[omoku-data='enemy-winRate']").html(Y(d.wins,d.loses)),setTimeout(function(){S(d.name+"님과 게임을 시작합니다.","fa-check",!1)},1e3),setTimeout(function(){$("section.lobby").fadeOut(),U(),H("ready"),$("section.ingame").fadeIn(500,function(){n.emit("ROOMENTER")})},2e3)}),n.on("RSPSTART",function(e){console.log("RSPGAME START"),H("rsp"),$(".dialog.quitWarning>.forcequit").show(),$(".rspdone").removeClass("fa-hand-rock"),$(".rspdone").removeClass("fa-hand-scissors"),$(".rspdone").removeClass("fa-hand-paper"),$(".rspdone").removeClass("fas"),$(".rspdone").addClass("fa"),$(".rspdone").addClass("fa-check"),$(".rspdone").hide(),$(".rsprotate").show(),$(".mybutton.selected").removeClass("selected"),$(".mybutton").show(),$(".dialog.rsp .timer").css("width","100%"),$(".dialog.rsp h1[omoku-data='title']").html("가위바위보 승자가 흑돌을 쥡니다."),$(".dialog.rsp h2").html('오목은 흑돌이 선공입니다.<br/><i omoku-data="rsptimer">7</i>&nbsp;초안에 선택해주세요.');var t=1,o=7,a=setInterval(function(){$(".rsprotate").removeClass("fa-hand-rock"),$(".rsprotate").removeClass("fa-hand-scissors"),$(".rsprotate").removeClass("fa-hand-papaer"),1==t?$(".rsprotate").addClass("fa-hand-rock"):2==t?$(".rsprotate").addClass("fa-hand-scissors"):$(".rsprotate").addClass("fa-hand-paper"),4==++t&&(t=1)},100),s=setInterval(function(){o>0?(o--,$("i[omoku-data='rsptimer']").html(o)):clearInterval(s)},1e3);$(".intervene>.rsp>.timer").stop().animate({width:"0%"},7e3,"linear",function(){if(clearInterval(a),clearInterval(s),$(".rsprotate").hide(),$(".rspdone").fadeIn(),!E){var e=Math.floor(3*Math.random())+1,t="R";2==e?t="S":3==e&&(t="P"),$(".rspbutton.mybutton").hide(),$(".mybutton[omoku-rspdata='"+t+"']").fadeIn(),$(".mybutton[omoku-rspdata='"+t+"']").addClass("selected"),n.emit("RSPSELECT",t)}})}),n.on("RSPENEMYDONE",function(e){console.log("RSPGAME ENEMY HAS SELECTED"),$(".rsprotate").hide(),$(".rspdone").fadeIn()}),n.on("RSPRESULT",function(e){var t,n;K(),$(".intervene>.rsp>.timer").stop(),console.log("RSPGAME RESULT PACKET / WINNER : "+e),-1==e?(t="무승부입니다!",n="가위바위보를 곧 다시 실시합니다..",$(".dialog.rsp>div>.rspdone").removeClass("fa-check"),$(".dialog.rsp>div>.rspdone").removeClass("fa"),$(".dialog.rsp>div>.rspdone").addClass("fas"),"R"==E?$(".dialog.rsp>div>.rspdone").addClass("fa-hand-rock"):"S"==E?$(".dialog.rsp>div>.rspdone").addClass("fa-hand-scissors"):$(".dialog.rsp>div>.rspdone").addClass("fa-hand-paper")):e==c.User.id?(t=c.User.name+"님의 승리!",n=c.User.name+"님이 선공합니다.",$(".dialog.rsp>div>.rspdone").removeClass("fa-check"),$(".dialog.rsp>div>.rspdone").removeClass("fa"),$(".dialog.rsp>div>.rspdone").addClass("fas"),"R"==E?$(".dialog.rsp>div>.rspdone").addClass("fa-hand-scissors"):"S"==E?$(".dialog.rsp>div>.rspdone").addClass("fa-hand-paper"):$(".dialog.rsp>div>.rspdone").addClass("fa-hand-rock")):(t=d.name+"님의 승리!",n=d.name+"님이 선공합니다.",$(".dialog.rsp>div>.rspdone").removeClass("fa-check"),$(".dialog.rsp>div>.rspdone").removeClass("fa"),$(".dialog.rsp>div>.rspdone").addClass("fas"),"R"==E?$(".dialog.rsp>div>.rspdone").addClass("fa-hand-paper"):"S"==E?$(".dialog.rsp>div>.rspdone").addClass("fa-hand-rock"):$(".dialog.rsp>div>.rspdone").addClass("fa-hand-scissors")),$(".dialog.rsp>h1[omoku-data='title']").html(t),$(".dialog.rsp>h2").html(n)}),n.on("GAMETURN",function(e){K(),L(),console.log("GAMETURN .. "+e.round+" 라운드 / "+e.who+"의 턴/ "+e.timer+"초 경과"),k=e.timer,u=e.timePerTurn,$("*[omoku-data='state']").html(Q(k)),$("*[omoku-data='phase']").html(e.round+"번째 착수"),null!=m&&clearInterval(m),f||(f=setInterval(function(){k++,$("*[omoku-data='state']").html(Q(k))},1e3)),$("*[omoku-data='turn-time-left']").html(" 15초 남음"),m=setInterval(function(){u>0?(10==--u&&w&&D("10초 남았습니다.",!0),5==u&&w&&D("5초 남았습니다.",!0),$("*[omoku-data='turn-time-left']").html(" "+u+"초 남음")):$("*[omoku-data='turn-time-left']").html(" 아무곳이나 착수합니다.")},1e3),e.who==c.User.id?(w=!0,D(),$("*[omoku-data='turn']").html(c.User.name+" 차례"),$("section.ingame .ingameBar.me").removeClass("off"),$("section.ingame .ingameBar.me").addClass("on"),$("section.ingame .ingameBar.enemy").removeClass("on"),$("section.ingame .ingameBar.enemy").addClass("off"),$("section.ingame .ingameBar.me small.turn").show(),$("section.ingame .ingameBar.enemy small.turn").hide()):(w=!1,$("*[omoku-data='turn']").html(d.name+" 차례"),$("section.ingame .ingameBar.me").removeClass("on"),$("section.ingame .ingameBar.me").addClass("off"),$("section.ingame .ingameBar.enemy").removeClass("off"),$("section.ingame .ingameBar.enemy").addClass("on"),$("section.ingame .ingameBar.me small.turn").hide(),$("section.ingame .ingameBar.enemy small.turn").show(),$(".gameAction>#placeApplier").hide())}),n.on("PLACE",function(e){console.log("PLACE .. 누가 ? "+e.who+" X : "+e.x+" /  Y : "+e.y+" 돌 : "+e.stone),clearInterval(m);var t="pos"+e.x+"-"+e.y;$(".board>button."+t).removeClass("on"),$(".board>button."+t).addClass(e.stone),e.who==c.User.id?($("aside.gameAction>#placeApplier").fadeOut(),c.User.dol&&$(".board>button."+t).addClass(c.User.dol.item.image)):d.dol&&$(".board>button."+t).addClass(d.dol.item.image)}),n.on("PLACEERR",function(e){console.log("PLACEERR .. "+e),"33"==e&&($("aside.gameAction>#placeApplier").fadeOut(),D("흑은 33을 둘 수 없습니다.",!0),w=!0)}),n.on("ENDGAME",function(e){var t,n=!1;w=!1,clearInterval(f),clearInterval(m),e.winner==c.User.id?(t=c.User.name,n=!0):t=d.name,D(t+"님이 이겼습니다!",!1,!0);for(var o=0;o<e.testimony.length;o++){y=e.testimony[o][0],x=e.testimony[o][1];var a="pos"+y+"-"+x;$("button[pos='"+a+"']").addClass("on")}setTimeout(function(){H("endgame");var e="패배했습니다.";h2='<i class="gold fa fa-dot-circle">&nbsp;'+O+"골드</i>를 잃었습니다!<br/>잠시 뒤 자동 퇴장합니다.",n&&(e="승리했습니다!",h2='<i class="gold fa fa-dot-circle">&nbsp;'+I+"골드</i>를 얻었습니다!<br/>잠시 뒤 자동 퇴장합니다."),$(".dialog.endgame>h1[omoku-data='title']").html(e),$(".dialog.endgame>h2").html(h2)},2e3)}),n.on("ROOMCLOSED",function(e){K(function(e){j(e)}),w=!1,clearInterval(f),clearInterval(m),null,d=null,E=null,u=0,k=0,$("section.gameBoard>.board>button").removeClass("white"),$("section.gameBoard>.board>button").removeClass("black"),$("section.gameBoard>.board>button").removeClass("on"),setTimeout(function(){L(),$(".runningBtn.matched").hide(),$(".startBtn").show(),S("방을 퇴장하는 중입니다.."),$("section.ingame").fadeOut(300,function(){$("section.lobby").fadeIn(300,function(){U(),"ENDGAME"==e?console.log("ROOMCLOSED 패킷 : 정상적인 게임 종료로 인한 퇴장.."):"DISCONNECT"==e?(console.log("ROOMCLOSED 패킷 : 상대방의 비정상적 연결 끊김으로 강제퇴장.."),alert("상대방과의 연결이 끊어졌습니다.\n상대방에겐 "+M+"골드 차감의 패널티를 부여했습니다.\n\n게임에 불편을 끼쳐 죄송합니다.")):"DISCONNECTBYME"==e?(console.log("ROOMCLOSED 패킷 : 상대방의 비정상적 연결 끊김으로 강제퇴장.."),alert("게임 중 퇴장 패널티로 "+M+"골드 차감되었습니다.")):"DISCONNECTUNKNOWN"==e&&(console.log("ROOMCLOSED 패킷 : 상대방의 비정상적 연결 끊김으로 강제퇴장.."),alert("상대방이 응답하지 않습니다."))})})},500)}),n.on("DISCONNECTED",function(e){T=!0,w=!1,clearInterval(f),clearInterval(m),null,d=null,E=null,u=0,k=0,$("section.gameBoard>.board>button").removeClass("white"),$("section.gameBoard>.board>button").removeClass("black"),$("section.gameBoard>.board>button").removeClass("on"),L(),$(".runningBtn.matched").hide(),$("section.login").hide(),$("section.lobby").hide(),$("section.ingame").hide(),S("에러코드 "+e.code+"<br/>"+e.msg,"fa-ban",!1,!0)}),n.on("GAMECHAT",function(e){console.log("GAME CHAT PACKET ARRIVED : "+e),c.User.id==e.who?($(".me .chatBalloon").html(e.message),$(".me .chatBalloon").show(),$(".me .chatBalloon").css("bottom","80px"),$(".me .chatBalloon").animate({bottom:"60px"},200,function(){clearTimeout(g),g=setTimeout(function(){$(".me .chatBalloon").fadeOut()},3e3)})):($(".enemy .chatBalloon").html(e.message),$(".enemy .chatBalloon").show(),$(".enemy .chatBalloon").css("top","40px"),$(".enemy .chatBalloon").animate({top:"60px"},200,function(){clearTimeout(v),v=setTimeout(function(){$(".enemy .chatBalloon").fadeOut()},3e3)}))})}(e):($("section.login").fadeIn(),U(),ee()),j(e)});var e={dataType:"json",success:q,beforeSubmit:W,error:V};o.ajaxForm(e);var t={dataType:"json",success:X,beforeSubmit:F,error:J,headers:{"X-CSRF-TOKEN":$("input[name='_token']").val()}};i.ajaxForm(t)}),$("#chatInput").keypress(function(e){if(13==e.keyCode){var t=$(this).val();t=t.substring(0,40),n.emit("CHAT",t),$(this).val(""),$(this).focus()}}),$("#ingameChatBody").keypress(function(e){13==e.keyCode&&z($(this).val())}),$("#chatSubmit").click(function(){z($("#ingameChatBody").val())}),$("#connectFriend").click(function(){U();_(1,"연결할 친구의 닉네임을 입력해주세요.",function(){var e=$("#ModalInput").val();P(),S("연결 요청 중.."),n.emit("CONNECT",{me:c.User.id,to:e})},"fa fa-user-friends")}),$("#Btn_changeName").click(function(){_(1,"바꿀 닉네임을 입력하세요.(6자이내)",function(){var e=$("#ModalInput").val().trim(),t=$(".Modal input[name='_token']").val();if(""!=e){var n=new G("Auth@changeName","/auth/changeName","post",{name:e,token:t},"json");n._s=function(e){e.success?(_("3","닉네임이 변경되었습니다!",function(){P()},"fa fa-check"),K()):_("3",e.msg,function(){P()},"fa fa-ban")},n.run()}})}),$("#Btn_changePasswd").click(function(){_(4,"바꿀 비밀번호를 입력하세요.",function(){var e=$("#ModalInput").val().trim();$(".Modal input[name='_token']").val();if(""!=e){var t=new G("Auth@changePassword","/auth/changePassword","post",{password:e},"json");t._s=function(e){e.success?(_("3","비밀번호가 변경되었습니다!",function(){P()},"fa fa-check"),K()):_("3",e.msg,function(){P()},"fa fa-ban")},t._e=function(e){alert("비밀번호 변경중 오류가 발생했습니다.\n비밀번호가 8자 이상인지 확인해보세요.")},t.run()}},"fas fa-key")}),$("#Btn_removeUser").click(function(){_(1,'회원탈퇴 후 복구는 불가능합니다.<br/>탈퇴하려면 <em class="colorRed">계정탈퇴동의</em> 라고 정확히 입력해주세요.',function(){var e=$("#ModalInput").val().trim();$(".Modal input[name='_token']").val();if(""!=e){var t=new G("Auth@removeAccount","/auth/removeAccount","post",{allow:e},"json");t._s=function(e){e.success?(alert("탈퇴처리 되었습니다.\n이용해 주셔서 감사합니다!"),n.close(),top.location.href="/auth/logout"):_("3",e.msg,function(){P()},"fa fa-ban")},t.run()}},"fa fa-user-slash")}),$("#startMatch").click(function(){n.emit("MATCHIN")}),$("#running").click(function(){n.emit("MATCHOUT")}),$(".rspbutton.mybutton").click(function(){var e=$(this).attr("omoku-rspdata");E=e,$(".rspbutton.mybutton").hide(),$(this).fadeIn(),$(this).addClass("selected"),n.emit("RSPSELECT",e)}),$("section.gameBoard>.board>button").each(function(e,t){var n=$(this).attr("pos"),o=20+12*(2*((n=(n=n.split("pos"))[1].split("-"))[0]-1)-1),a=20+12*(2*(n[1]-1)-1);$(this).css("left",o+"px"),$(this).css("top",a+"px")}),$("section.gameBoard>.board>button").click(function(){$("section.gameBoard>.board>button").removeClass("on");var e=$(this).hasClass("white"),t=$(this).hasClass("black");if(w&&!e&&!t){$("*[omoku-data='placeBtn']").find("i").removeClass("fa-spinner"),$("*[omoku-data='placeBtn']").find("i").removeClass("spin"),$("*[omoku-data='placeBtn']").find("i").addClass("fa-check"),$("*[omoku-data='placeBtn']").find("span").html("&nbsp;착수");var n=$(this).attr("pos");n=(n=n.split("pos"))[1].split("-"),h=n[0],p=n[1],$(this).addClass("on"),$(".gameAction>#placeApplier").hide(),$(".gameAction>#placeApplier").fadeIn()}}),$("*[omoku-data='placeBtn']").click(function(){w=!1,n.emit("PLACE",{x:h,y:p}),$(this).find("i").removeClass("fa-check"),$(this).find("i").addClass("fa-spinner"),$(this).find("i").addClass("spin"),$(this).find("span").html("착수중..")}),$("section.ingame>section.ingameBar.enemy>em.fa-arrow-left").click(function(){H("quitWarning")}),$(".dialog.quitWarning>.forcequit").click(function(){$(this).hide(),confirm("정말 나가시겠습니까?")?n.emit("ROOMSOFTQUIT"):$(this).show()}),$(".dialog.quitWarning>.cancel").click(function(){L()}),$("nav.bottom>ul>li").click(function(){var e,t,n=$(this).attr("segment");if("ranking"==n){e=function(e){var t='<ul class="ranker head"><li class="no">순위</li><li class="nick">닉네임</li><li class="wins">승</li><li class="loses">패</li><li class="winrate">승률</li><li class="online">접속</li></ul>',n=1;e.forEach(function(e){var o;o="1"==e.online?'<em class="fas fa-circle" style="color:limegreen"></em>':'<em class="fas fa-circle" style="color:gray"></em>',t+='<ul class="ranker"><li class="no">'+n+'</li><li class="nick">'+e.name+'</li><li class="wins">'+e.wins+'</li><li class="loses">'+e.loses+'</li><li class="winrate">'+Y(e.wins,e.loses)+'%</li><li class="online">'+o+"</li></ul>",n++}),$(".rankBoard").html(t)},(t=new G("API@RANKING","/api/ranking"))._s=e,t.run()}else if("store"==n){!function(e){var t=new G("SHOP@INDEX","/shop");t._s=e,t.run()}(function(e){var t="";e.forEach(function(e){t+='<li itemid="'+e.id+'" itemname="'+e.item_name+'" price="'+e.price+'" itemtype="'+e.type+'">',t+='<div class="imageHolder">',"dol"==e.type&&(t+='<img src="/img/'+e.type+"/"+e.image+'.black.png"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>',t+='&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="/img/'+e.type+"/"+e.image+'.white.png"/>'),t+="</div>",t+="<h1>"+e.item_name+"</h1>",t+="<p>"+e.item_desc+"</p>",t+='<button class="Btn_buyItem" itemid="'+e.id+'"><em class="fa fa-dot-circle gold">&nbsp;'+e.price+"</em> (7일)</button>",t+="</li>"}),$(".storeBoard>ul.item").html(t),$(".storeBoard>ul.item>li[itemtype='dol']").show(),$("button.Btn_buyItem").click(function(){var e,t,n;e=$(this).attr("itemid"),t=$("li[itemid='"+e+"']").attr("itemname"),n=$("li[itemid='"+e+"']").attr("price"),B=e,_(2,t+" - <em class='gold fa fa-dot-circle'>&nbsp;"+n+"</em><br/>정말 구매하시겠어요?",function(){var e,t;e=function(e){e.success?(_(3,"구매를 완료했습니다."),K()):_(3,e.message)},(t=new G("SHOP@PURCHASE","/shop/purchase","post",{itemid:B}))._s=e,t.run()},"fa fa-shopping-cart")})})}else"account"==n&&function(e){var t=new G("SHOP@PURCHASEINDEX","/shop/purchase");t._s=e,t.run()}(b)}),$(document).on("click","button.accept",function(){var e;e=$(this).attr("who"),clearInterval(A[e]),$(".inviteListWrapper").html(""),n.emit("CONNECTACCEPT",e),$(".startBtn").hide(),$("#matched").fadeIn(),S("곧 게임을 진행합니다..")}),$(document).on("click","button.reject",function(){Z($(this).attr("who"))}),document.addEventListener("touchmove",function(e){if(1==e.touches.length)e.touches[0],$("section.gameBoard>.board").offset().left},!1),window.addEventListener("orientationchange",ee),ee()}});